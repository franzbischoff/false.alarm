// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/rocker-org/devcontainer-templates/tree/main/src/r-ver
{
  "name": "false.alarm devcontainer",
  // Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
  "image": "ghcr.io/rocker-org/devcontainer/r-ver:4.3",
  "features": {
    "ghcr.io/dhoeric/features/hadolint:1": {
      "version": "latest"
    },
    "ghcr.io/rocker-org/devcontainer-features/apt-packages:1": {
      "packages": [
        "curl",
        "gnupg",
        "less",
        "locales",
        "procps",
        "tzdata",
        "libzmq3-dev",
        "libudunits2-dev",
        "libgdal-dev",
        "libmagick++-dev"
      ]
    },
    "ghcr.io/rocker-org/devcontainer-features/r-packages:1": {
      "packages": "jsonlite,languageserver,prompt"
    },
    "ghcr.io/rocker-org/devcontainer-features/pandoc:1": {
      "version": "latest"
    },
    "ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": {
      "installTinyTex": true,
      "installChromium": true,
      "version": "latest"
    },
    "ghcr.io/rocker-org/devcontainer-features/renv-cache:0": {}
  },
  "containerEnv": {
    "DEBUGME": "R_GlobalEnv",
    "PUID": "1000",
    "PGID": "1000",
    "TZ": "Europe/Lisbon"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode-remote.remote-containers",
        "EditorConfig.EditorConfig",
        "usernamehw.errorlens",
        "mitchdenny.ecdc",
        "github.vscode-github-actions",
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "GitHub.copilot-labs",
        "eamodio.gitlens",
        "PKief.material-icon-theme",
        "alefragnani.project-manager",
        "quarto.quarto",
        "REditorSupport.r",
        "RDebugger.r-debugger",
        "mechatroner.rainbow-csv",
        "marvhen.reflow-markdown",
        "natqe.reload",
        "mutantdino.resourcemonitor",
        "spmeesseman.vscode-taskexplorer",
        "gerane.Theme-Twilight",
        "ms-vscode-remote.remote-wsl"
      ],
      "settings": {
        "markdown.validate.enabled": true,
        "editor.formatOnSave": true,
        "editor.tabCompletion": "on",
        "editor.tabSize": 2,
        "editor.wordWrapColumn": 120,
        "files.exclude": {
          "**/.DS_Store": true,
          "**/.git": true,
          "**/.git/objects/**": true,
          "**/.git/subtree-cache/**": true,
          "**/.hg": true,
          "**/.history": true,
          "**/.httr-oauth": true,
          "**/.RData": true,
          "**/.Rhistory": true,
          "**/.Rproj.user": true,
          "**/.svn": true,
          "**/CVS": true,
          "**/dist/**": true,
          "**/docs/**": false,
          "**/log/**": true,
          "**/logs/**": true,
          "**/man/**": true,
          "**/pdfs/**": true
        },
        "files.insertFinalNewline": true,
        "files.trimTrailingWhitespace": true,
        "files.watcherExclude": {
          "**/.DS_Store": true,
          "**/.git": true,
          "**/.git/objects/**": true,
          "**/.git/subtree-cache/**": true,
          "**/.Rproj.user": true,
          "**/dist/**": true,
          "**/docs/**": true,
          "**/log/**": true,
          "**/logs/**": true,
          "**/man/**": true,
          "**/pdfs/**": true,
          "**/renv/**": true,
          "**/tmp/**": true
        },
        "git.enableCommitSigning": true,
        "git.inputValidation": "always",
        "json.schemas": [
          {
            "fileMatch": [
              "codemeta.json"
            ],
            "url": "https://raw.githubusercontent.com/codemeta/codemeta/master/codemeta.jsonld"
          }
        ],
        "r.alwaysUseActiveTerminal": true,
        "r.bracketedPaste": true,
        "r.debugger.timeouts.startup": 15000,
        "r.helpPanel.cacheIndexFiles": "Workspace",
        "r.lsp.diagnostics": true,
        "r.plot.useHttpgd": false,
        "r.rmarkdown.codeLensCommands": [
          "r.runCurrentChunk",
          "r.runAboveChunks",
          "r.runAllChunks",
          "r.runCurrentAndBelowChunks"
        ],
        "r.rmarkdown.knit.focusOutputChannel": false,
        "r.rpath.linux": "/usr/local/bin/R",
        "r.rterm.linux": "/usr/local/bin/radian",
        "r.session.levelOfObjectDetail": "Detailed",
        "r.session.objectLengthLimit": 100,
        "r.workspaceViewer.showObjectSize": true,
        "reflowMarkdown.preferredLineLength": 120,
        "search.exclude": {
          "**/_*/": true
        },
        "files.associations": {
          ".whitesource": "jsonc",
          "*.cls": "latex",
          "*.sty": "latex"
        },
        "taskExplorer.enableAnsiconForAnt": false,
        "taskExplorer.enableSideBar": true,
        "taskExplorer.exclude": [
          "**/dist/**",
          "**/log/**",
          "**/logs/**",
          "**/pdfs/**",
          "**/renv/**",
          "**/man/**",
          "**/docs/**",
          "**/tmp/**",
          "**/.github/**",
          "**/dev/**",
          "/workspace/false.alarm/run.sh",
          "/workspace/false.alarm/.devcontainer/configure_gitpod.sh",
          "**/.trunk/**"
        ],
        "taskExplorer.groupMaxLevel": 2,
        "taskExplorer.groupSeparator": ": ",
        "taskExplorer.showLastTasks": false,
        "taskExplorer.enabledTasks": {
          "ant": false,
          "bash": false,
          "composer": false,
          "gradle": false,
          "grunt": false,
          "gulp": false,
          "make": false,
          "maven": false,
          "npm": false,
          "perl": false,
          "pipenv": false,
          "powershell": false,
          "python": false,
          "ruby": false,
          "tsc": false
        }
      }
    }
  },
  // Features to add to the dev container. More info: https://containers.dev/features.
  // "features": {},
  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // "forwardPorts": [],
  // Use 'postCreateCommand' to run commands after the container is created.
  "updateContentCommand": "Rscript -e 'renv::restore()'"
  // cd ${workspaceFolder} && Rscript -e \\'renv::restore()\\''"
  // Configure tool-specific properties.
  // "customizations": {},
  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
  // "remoteUser": "root"
}
