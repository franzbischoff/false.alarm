vscode:
  extensions:
    - streetsidesoftware.code-spell-checker
    - gruntfuggly.todo-tree
    - hbenl.vscode-test-explorer
    - streetsidesoftware.code-spell-checker-portuguese
    - streetsidesoftware.code-spell-checker-medical-terms
    - cschleiden.vscode-github-actions
    - editorconfig.editorconfig
    - donjayamanne.git-extension-pack
    - codezombiech.gitignore
    - james-yu.latex-workshop
    - richie5um2.vscode-sort-json
    - redhat.vscode-yaml
    - christian-kohler.path-intellisense
    - pkief.material-icon-theme
    - esbenp.prettier-vscode
    - foxundermoon.shell-format
    - alefragnani.bookmarks
    - ms-python.python
    - donjayamanne.githistory
    - eamodio.gitlens
    - ziyasal.vscode-open-in-github
    - https://marketplace.visualstudio.com/_apis/public/gallery/publishers/spmeesseman/vsextensions/vscode-taskexplorer/2.5.1/vspackage
    - https://github.com/meakbiyik/vscode-r-test-adapter/releases/download/v0.4.1/vscode-r-test-adapter-0.4.1.vsix
    - github.vscode-pull-request-github
    - bierner.markdown-preview-github-styles
    - yzhang.markdown-all-in-one

image: franzbischoff/false.alarm:latest

tasks:
  - name: Instructions
    before: code .github/gitpod-Instructions.md
    command: exit
  - name: Setup
    before: |
      code .github/gitpod-Instructions.md
      Rscript --vanilla -e "source('renv/activate.R')"
    init: |
      cp -RT /home/docker /home/gitpod
      chown -R gitpod:gitpod /home/gitpod
      sed -i 's/home\/docker/home\/gitpod/' /home/gitpod/.zshrc
      Rscript --vanilla -e "source('renv/activate.R'); renv::restore(); renv::isolate()"
      code -r false.alarm.code-workspace
      gp sync-done setup
      exit
  - name: Activate R
    before: |
      gp sync-await setup
      code --install-extension ikuyadeu.r
      exit
  - name: R Interactive
    init: |
      gp sync-await setup
      code --command r.createRTerm
